# Backend contest Yandex 2023

Отбор был гробовой, решил только 2/5 задачи, 3 решение поломалось на 8 тесте, 4 решение - TLE на 13. Этого хватило, чтобы пройти на интервью, но у меня было хорошее резюме, обычно требуется 3-4 задачи.

- Фикс для 3 - написать решение используя динамику по аналогии с задачей с Leetcode 123 под названием Best Time To Buy And Sell Stock III
- Фикс для 4 - написать какое-то решение через пересечение множеств (set intersection())
- 5 хз

## Собесы

На собесах спрашивали базу из [списка](https://github.com/NikolaySimakov/algorithms/blob/main/internships/yandex/interviews/README.md). Что удивительно, у меня спрашивали задачи уровня `Easy`, хотя я рассчитывал, что будут харды + всякая теория, но сказали, что в среднем всегда спрашивают `Easy`, так что главное не волноваться в процессе собеса.


### Task 1

Кузя снова не успел сдать реферат по языковым разнообразиям в срок. «Наверное, у меня какая-то неоптимальная клавиатура...» — подумал Кузя и решил изобрести самую оптимальную клавиатуру для набора одним пальцем.
Кузя решил, что его клавиатура будет содержать 
N рядов с клавишами (разные ряды могут содержать разные количества клавиш). Все клавиши на клавиатуре будут уникальными.
Чтобы оценить качество клавиатуры для набора определённого текста, Кузя ввёл понятие «разнорядности»:

Пусть текст представляет из себя строку S длины K;
Назовём переход между соседними в тексте символами `Si−1` и `Si(2≤i≤K)` разнорядным, если данные символы находятся на различных рядах клавиатуры;
Разнорядность равна количеству разнорядных переходов при наборе текста на заданной клавиатуре.
Например, пусть текст S равен ABCAD, а клавиатура содержит два ряда клавиш AC и BD. В таком случае при наборе текста будет ровно 3 разнорядных перехода:
S1 = A в S2 = B (ряд 1 в ряд 2); S = B в S3 = C (ряд 2 в ряд 1); S4 = A в S5 = D (ряд 1 в ряд 2). Вас, как лучшего игрока в Тетрис среди знакомых, Кузя просит вычислить разнорядность созданной им клавиатуры на последнем из Кузиных рефератов.

Формат ввода
Первая строка содержит одно целое число 
`N (1≤N≤2⋅10^5)` — количество клавиш на клавиатуре.
Вторая строка содержит N целых чисел `ci (0≤ci≤10^9)` — идентификаторы символов на клавишах. Гарантируется, что все значения ci различны. Третья строка содержит N целых чисел `ri (1≤ri≤10^9)`. Число ri задает номер ряда на клавиатуре, в котором расположена клавиша с символом ci.
Четвертая строка содержит одно целое число `K (1≤K≤2⋅10^5) `— количество символов в реферате. Пятая строка содержит K целых чисел sj — идентификаторы символов реферата в порядке набора на клавиатуре. Гарантируется, что для любого sj существует такой i, что sj = ci — любой символ из реферата присутствует на клавиатуре.

Формат вывода
Выведите единственное целое число — разнорядность заданной во входных данных конструкции клавиатуры на реферате S.

```
Пример 1
Ввод

4
1 2 3 4
1 2 1 2

Вывод

5
1 2 3 1 4
3


Пример 2

Ввод

3
42 3 14
1 3 3

Вывод

4
3 14 14 3

```
### Task 2

К Новому-преновому году работники Тындекса построили N ледяных скульптур, i-я скульптура состоит из ai килограмм льда. Но они не посоветовались с Кузей! А ведь Кузя знает, что идеальная скульптура состоит из ровно X килограмм льда, не больше и не меньше. Новый-преновый год уже совсем скоро, до него осталось всего T минут. За одну минуту Кузя может выбрать одну скульптуру и добавить или удалить ровно 1 килограмм льда из неё. Вас, как отличника художественной школы, Кузя просит найти максимальное количество идеальных скульптур в момент наступления праздника.

Формат ввода
В первой строке вводятся три целых числа `N, X, T(1≤N≤2⋅10^5; 0≤X≤10^9; 0≤T≤3⋅10^14)` — количество скульптур, идеальное количество льда в скульптуре и оставшееся количество минут до наступления праздника. Во второй строке вводятся через пробел N целых чисел `ai(1≤ai≤10^9)` — количество килограмм льда в i-й скульптуре.

Формат вывода
В первой строке выведите целое число `K (0≤K≤N)` — максимально возможное количество идеальных скульптур в момент наступления праздника.
Во второй строке выведите через пробел K различных целых чисел `bi (1≤bi≤N)` — номера скульптур, которые будут идеальными в момент наступления Нового-пренового года.
Скульптуры нумеруются с 1 в порядке ввода. Если оптимальных ответов несколько, то выведите любой из оптимальных.

```
Пример 1

Ввод

3 5 2
5 10 6

Вывод

2
1 3 

Пример 2

Ввод

5 19 32
36 10 72 4 50

Вывод

2
2 4 

Пример 3

Ввод

4 25 10
1 10 42 9

Вывод

0
```


### Task 3

Кузя изучает биографии самых известных трейдеров на бирже. Недавно Кузя прочитал историю о том, как, совершив всего четыре сделки (две покупки и две продажи) акций на бирже, трейдер смог превратить один рубль в целое состояние.
Кузя лучше всех знает, что такой удачи не бывает, а значит у трейдера была инсайдерская информация о ценах на ближайшие дни.
«Да если бы у меня была инсайдерская информация, я бы еще больше денег за четыре сделки получил!» — заявил Кузя перед своим преподавателем экономики. Преподаватель экономики не растерялся и выдал Кузе данные о ценах акций фирмы Тындекс за тот период.
Для простоты вычислений преподаватель предложил считать, что можно покупать и продавать любую дробную часть акции. Например, если акция стоит 2 рубля, а у вас в наличии 3 рубля, то вы можете купить 1.5 акции. Преподаватель ожидает, что Кузя вычислит наибольшее количество денег, которые можно получить из 1 рубля на старте, совершив не более четырех сделок.
Кузя резко вспомнил о множестве других очень важных дел, поэтому он просит вас, как знатока большинства промокодов и акций в супермаркетах, вычислить оптимальные дни для сделок на основе исторических данных.

Формат ввода
В первой строке расположено единственное целое число 
N — количество дней в исторических данных.
Вторая строка содержит N целых чисел через пробел — цена одной акции Тындекса в рублях в i-й день.

Формат вывода
В первой строке выведите одно целое число K — количество пар сделок «покупка — продажа» в оптимальной стратегии торговли, приводящей к наибольшему количеству денег из 1 рубля на старте. Следующие K строк должны содержать по два целых числа через пробел `bi si ( 1 ≤ bi < si ≤ N )` — дни покупки и продажи акций в i-й паре сделок.
Обратите внимание, что вы можете не совершать сделок вовсе или совершить только одну пару сделок.
Если вы считаете оптимальным совершить две пары сделок, то выведенные дни сделок должны следовать в общем хронологическом порядке, то есть `b1 < s1 < b2 < s2`. Если оптимальных ответов, содержащих не более четырех сделок, несколько, выведите любой из оптимальных.

```
Пример 1

Ввод

6
1 4 2 3 3 5

Вывод

2
1 2
3 6

Пример 2

Ввод

5
10 5 5 7 6

Вывод

1
3 4

Пример 3

Ввод

3
3 2 2
0
```

### Task 4

Кузя был очень удивлён, когда на десятилетие выпуска не приехала большая часть его одноклассников.
«Чему тут удивляться, разъехались по миру», — сказал ему один из пришедших одноклассников.
Кузя решил, что раз одноклассники не приехали на выпускной, то Кузя сам привезёт выпускной им. Правда для этого Кузе необходимо узнать, в какие страны они переехали.
Кузя знает, что каждая страна разрешает переезд на основе двух характеристик:

Минимальный доход, необходимый для проживания;
Обязательное наличие высшего образования.
Также Кузя знает, что некоторые страны разрешают переезд непосредственным детям своих граждан без необходимости удовлетворять описанным выше характеристикам.
Про каждого из уехавших одноклассников Кузя выяснил следующую информацию (мы сами не понимаем, где он всё это узнал):

Величина дохода;
Наличие высшего образования;
Гражданство родителей.
Теперь Кузя просит вас, как лучшего игрока в GeoGuesser среди выпускников, выяснить страну, в которую переехал каждый из непришедших на выпускной одноклассников.

Формат ввода
Первая строка содержит одно целое число N — количество стран, рассматриваемых для переезда.
Вторая строка содержит N целых чисел через пробел — минимальный доход, необходимый для переезда в i-ю страну. Третья строка содержит N целых чисел через пробел `bi (0≤bi≤1)` — bi равно 1, если для переезда в i-ю страну обязательно наличие высшего образования. 
Четвертая строка содержит N целых чисел через пробел `ci (0≤ci≤1)` — ci равно 1, если непосредственные дети граждан i-й страны могут переехать в i-ю страну, не удовлетворяя условиям на доход и высшее образование. Страны нумеруются с 1 по N в порядке ввода.
Пятая строка содержит одно целое число `Q (1≤Q≤2⋅10^5)` — количество одноклассников, не пришедших на выпускной.
Шестая строка содержит Q целых чисел через пробел `xj (0≤xj≤109)` — доход j-го одноклассника.
Седьмая строка содержит Q целых чисел через пробел `yj (0≤yj≤1)` — yj равно 1, если у j-го одноклассника есть высшее образование.
Восьмая строка содержит Q целых чисел через пробел `zj (0≤zj≤N)` — гражданство родителей j-го одноклассника, заданное номером страны или 0, если их гражданство неизвестно. Одноклассники нумеруются с 1 по Q в порядке ввода.

Формат вывода
В единственной строке выведите Q целых чисел через пробел `tj (0≤tj≤N)` — номер страны, которую выбрал для переезда j-й одноклассник.
Каждый одноклассник может выбрать только страну, в которую он имеет право переехать (согласно условиям).
В случае, если одноклассник может выбрать несколько стран для переезда, он выберет страну с наименьшим номером в списке (Кузя любезно отсортировал страны в порядке убывания привлекательности для переезда).
Если одноклассник не мог переехать ни в одну из описанных стран, выведите 0.

```
Пример

Ввод    Вывод

2
10 9
1 0
0 1

5
0 0 11 10 9
0 1 0 1 1
2 1 0 0 0
2 0 2 1 2 
```
### Task 5

Недавно Кузя разбирал чердак на даче своей бабушки и нашел очень древнюю и непонятную книгу. Кузя сразу понял, что это книга с заклинаниями, а бабушка — волшебница, просто это скрывает.
А раз бабушка умеет творить магию, то и Кузя сможет! Кузя решил тут же применить свои недюжинные навыки чтения и прочитать какие-нибудь заклинания из книги.
В дальнейшем будем считать, что все записи в книге представляют собой одну большую строку S. Все символы в книге представляют собой малые латинские буквы.
Кузя смотрел много фильмов про волшебников, поэтому знает два важных правила:

Если в данный момент прочитан символ на позиции i, то следующим Кузя должен прочитать символ на позиции pi;
Пусть ki — порядковый номер в алфавите символа на i-й позиции в тексте (a — 0-й, z — 25-й). Если Кузя за время одного заклинания должен прочитать символ на i-й позиции в mi-й раз, то вместо этого он вслух произносит символ с порядковым номером в алфавите `(ki+(mi−1)⋅di) mod 26`.
Подробный пример находится в примечании к тестовым примерам (в самом низу).
Обратите внимание, что изменения символов при прочтении действуют только в рамках одного заклинания (mi считаются независимо для каждого прочтения заклинания).
Кузя считает, что сила прочитанного заклинания равна количеству уникальных символов, которые в него вошли. К примеру, в заклинании «zbacbef» ровно 6 уникальных символов `[a,b,c,e,f,z]`.
Кузя нашел на обложке книги число K и понял, что для оптимального эффекта необходимо прочесть заклинания всех длин от 1 до K включительно, начав по очереди с каждого символа от 1 до N (всего Кузя планирует прочесть N×K заклинаний).
Кузя боится слишком мощных выбросов магической энергии. Поэтому он просит вас, как победителя викторины по Гарри Поттеру в 5-м классе, заранее вычислить суммарную силу всех N×K заклинаний, которые он собирается прочесть.

Формат ввода
В первой строке дано два целых числа 
`N и K(1≤N≤10^5,1≤K≤10^9)` — количество символов в тексте книги.
Во второй строке дана строка S длины N, состоящая из малых латинских букв `(Si∈[a…z])` — текст книги с заклинаниями.
В третьей строке дано N целых чисел pi через пробел `(1≤pi≤N)` — позиция символа, который следует прочесть после чтения символа на i-й позиции.
В четвертой строке дано N целых чисел di через пробел `(0≤di≤25)` — сдвиг при повторном чтении символа на i-й позиции (читайте условие и примечание).

Формат вывода
В единственной строке выведите единственное число — суммарную силу всех N×K заклинаний, начинающихся в каждой из позиций `1,2,…,N` и имеющих длину `1,2,…,K`.

```
Пример 1

Ввод	Вывод

3 7
abz
3 1 2
4 0 3
74


Пример 2

Ввод	Вывод

4 6
abcd
2 3 1 4
1 0 2 13
62

Пример 3

Ввод	Вывод

10 1000000000
qwertzxcvb
2 3 4 5 3 4 8 7 10 2
1 2 3 4 5 6 7 8 9 10
259999995297
```